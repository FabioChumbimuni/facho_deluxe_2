================================================================================
ğŸ¯ GUÃA RÃPIDA - SISTEMA DE COORDINACIÃ“N INTELIGENTE
================================================================================

âœ… IMPLEMENTACIÃ“N COMPLETA - TODO FUNCIONANDO

================================================================================
ğŸ“‹ REGLAS DE EJECUCIÃ“N:
================================================================================

1. TAREA NUEVA (reciÃ©n creada):
   â””â”€ Primera ejecuciÃ³n: now + 1 minuto
   â””â”€ Segunda ejecuciÃ³n: now + intervalo configurado
   â””â”€ Ejemplo: Creas tarea con intervalo 10 min
               â€¢ 10:00 - Creada
               â€¢ 10:01 - Primera ejecuciÃ³n (prueba)
               â€¢ 10:11 - Segunda ejecuciÃ³n (ya en intervalo normal)

2. TAREA EXISTENTE (ya creada, solo habilitada):
   â””â”€ Primera ejecuciÃ³n: now + intervalo COMPLETO
   â””â”€ Ejemplo: Habilitas tarea a 10:50 con intervalo 10 min
               â€¢ 10:50 - Habilitada
               â€¢ 11:00 - Primera ejecuciÃ³n (10 min despuÃ©s)
               â€¢ 11:10 - Segunda ejecuciÃ³n

3. CUOTAS POR HORA:
   â””â”€ Hora PARCIAL: Ejecuta lo que alcance (sin compensar)
   â””â”€ Hora COMPLETA: Cumple cuota normal
   â””â”€ Ejemplo: Habilitas a 10:50, intervalo 5 min
               â€¢ Hora 10:00-11:00: Solo 2 ejecuciones (10 min disponibles) âœ…
               â€¢ Hora 11:00-12:00: 12 ejecuciones (hora completa) âœ…

4. GESTIÃ“N DE COLISIONES:
   â””â”€ Discovery (P90) ejecuta PRIMERO
   â””â”€ GET (P40) se ENCOLA
   â””â”€ Discovery termina â†’ GET ejecuta INMEDIATAMENTE
   â””â”€ Respeta intervalos: cada ejecuciÃ³n actualiza next_run

5. CADA OLT ES INDEPENDIENTE:
   â””â”€ OLT-A: ejecuta a 10:05, 10:10, 10:15...
   â””â”€ OLT-B: ejecuta a 10:07, 10:12, 10:17...
   â””â”€ No se afectan mutuamente

================================================================================
ğŸ—ï¸ ARQUITECTURA:
================================================================================

SnmpJob (Plantilla/Agrupador)
  â””â”€ Define: QUÃ‰ hacer (OID, tipo)
  â””â”€ Intervalo: GUÃA, no ley estricta
  â””â”€ Se asocia a mÃºltiples OLTs

SnmpJobHost (GestiÃ³n por OLT) â­ MODIFICADO
  â””â”€ next_run_at: CUÃNDO ejecutar en ESTA OLT
  â””â”€ last_run_at: CUÃNDO se ejecutÃ³
  â””â”€ Cada OLT tiene horario independiente

Coordinator (Supervisor)
  â””â”€ Loop cada 5 segundos
  â””â”€ Lee SnmpJobHost.next_run_at
  â””â”€ Ejecuta por prioridad
  â””â”€ Callbacks para ejecuciÃ³n inmediata

================================================================================
ğŸŒ URLS:
================================================================================

Admin Tareas:       http://192.168.56.222:8000/admin/snmp_jobs/snmpjob/
Dashboard:          http://192.168.56.222:8000/coordinator/dashboard/
Logs Coordinator:   http://192.168.56.222:8000/admin/execution_coordinator/coordinatorlog/
Quota Trackers:     http://192.168.56.222:8000/admin/execution_coordinator/quotatracker/

================================================================================
ğŸ“Š MONITOREO:
================================================================================

Logs coordinator:   tail -f /opt/facho_deluxe_2/logs/coordinator/main.log
Logs discovery:     tail -f /opt/facho_deluxe_2/logs/celery_worker_discovery.log
Logs GET:           tail -f /opt/facho_deluxe_2/logs/celery_worker_get.log

================================================================================
âœ¨ LISTO PARA USAR
================================================================================

El coordinator estÃ¡ corriendo y gestionando todas las ejecuciones.
Habilita tareas y observa cÃ³mo las coordina inteligentemente.

